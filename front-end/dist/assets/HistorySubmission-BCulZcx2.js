import{r as s,i as H,j as e,s as x,D as p,a_ as k,L as S,$ as L,b0 as N,b4 as W,b2 as f,b5 as n,b1 as $,b3 as a,b6 as q,P as B}from"./index-Du5abbo3.js";const X=({coderId:o})=>{const[T,h]=s.useState(!0),[d,u]=s.useState([]),[r,c]=s.useState(1),[i,j]=s.useState(10),[b,y]=s.useState(0),[P,A]=s.useState(0),m=s.useCallback(async(t=1,l=10)=>{h(!0);try{if(!o){u([]);return}const g=await H.get("/Submission/history",{params:{coderId:o,page:t,pageSize:l}}),{data:w,currentPage:R,pageSize:D,totalPages:v,totalCount:E}=g.data;u(w||[]),c(R),j(D),y(v),A(E)}catch(g){console.error("❌ Error fetching history:",g)}finally{h(!1)}},[o]);s.useEffect(()=>{m(r,i)},[m,r,i]);const z=t=>{t>=1&&t<=b&&c(t)},C=t=>{j(t),c(1)};return e.jsxs(x,{px:6,py:5,minH:"50vh",bg:"white",borderRadius:"md",shadow:"md",children:[e.jsxs(x,{children:[e.jsx(p,{fontSize:"xl",color:"blue.600",fontWeight:"bold",children:"Lịch sử làm bài"}),e.jsx(k,{w:"60px",h:"3px",bg:"blue.600",borderRadius:"md",mt:1})]}),T?e.jsx(S,{align:"center",mt:10,children:e.jsx(L,{size:"lg",color:"blue.500"})}):d.length===0?e.jsx(S,{spacing:4,mt:5,children:e.jsx(p,{fontSize:"lg",color:"gray.600",children:"Chưa có lịch sử làm bài nào"})}):e.jsx(x,{overflowX:"auto",mt:5,children:e.jsxs(N,{variant:"simple",children:[e.jsx(W,{children:e.jsxs(f,{position:"sticky",top:0,zIndex:1,bg:"gray.200",children:[e.jsx(n,{textAlign:"center",children:"STT"}),e.jsx(n,{textAlign:"center",children:"Thời gian nộp"}),e.jsx(n,{textAlign:"center",children:"Ngôn ngữ"}),e.jsx(n,{textAlign:"center",children:"Kết quả"}),e.jsx(n,{textAlign:"center",children:"Điểm"}),e.jsx(n,{textAlign:"center",children:"Thời gian"})]})}),e.jsx($,{children:d.map((t,l)=>e.jsxs(f,{children:[e.jsx(a,{textAlign:"center",children:(r-1)*i+l+1}),e.jsx(a,{textAlign:"center",children:q(t.submitTime)}),e.jsx(a,{textAlign:"center",children:t.compilerName||"---"}),e.jsx(a,{textAlign:"center",fontWeight:"bold",color:t.testResult==="Accepted"?"green.500":/fail|wrong|error/i.test(t.testResult)?"red.500":"yellow.500",children:t.testResult||"--"}),e.jsx(a,{textAlign:"center",children:t.point}),e.jsx(a,{textAlign:"center",children:t.maxTimeDuration!=null?`${t.maxTimeDuration} ms`:"--"})]},t.submissionID||l))})]})}),e.jsx(B,{currentPage:r,totalPages:b,totalRows:P,onPageChange:z,pageSize:i,onPageSizeChange:C})]})};export{X as default};
