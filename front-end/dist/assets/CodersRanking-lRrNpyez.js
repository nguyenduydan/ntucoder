import{r,j as s,B as u,bA as z,o as C,b as o,cd as S,z as w,A as E,E as g,G as c,J as k,K as l,ce as K}from"./react-vendor-B0lTxKSL.js";import{a as L}from"./index-CfmnNlTN.js";import"./charts-vendor-DwxpLNbD.js";import"./vendor-C1WdaeOg.js";import"./lodash-vendor-CBiJWk4A.js";import"./axios-vendor-xsH4HHeE.js";import"./moment-vendor-CTDujYFw.js";const J=({refreshKey:b,onFinishRefresh:a,height:n})=>{const[i,f]=r.useState([]),[T,h]=r.useState(!1),[x,p]=r.useState(null),j=r.useCallback(async()=>{h(!0),p(null);try{const d=(await L.get("/Coder/list-ranking")).data.data.slice(0,5).map((e,y)=>({...e,rank:y+1}));f(d)}catch(t){p("Không thể tải danh sách coder."),console.error("Lỗi khi lấy danh sách coder:",t)}finally{h(!1),a==null||a()}},[a]);return r.useEffect(()=>{j()},[j,b]),T?s.jsx(u,{p:5,bg:"white",shadow:"md",borderRadius:"md",h:n||"auto",children:s.jsx(z,{h:"100%",children:s.jsx(C,{size:"xl"})})}):s.jsxs(u,{p:5,bg:"white",shadow:"md",borderRadius:"md",h:n||"auto",children:[s.jsxs(o,{fontSize:"xl",fontWeight:"bold",mb:4,display:"flex",alignItems:"center",gap:2,children:[s.jsx(S,{size:24}),"Danh sách 5 người cao nhất"]}),x?s.jsx(o,{color:"red.500",children:x}):i.length===0?s.jsx(o,{children:"Không có dữ liệu xếp hạng."}):s.jsxs(w,{variant:"striped",bg:"gray.300",size:"md",children:[s.jsx(E,{children:s.jsxs(g,{children:[s.jsx(c,{children:"Rank"}),s.jsx(c,{children:"Tên"}),s.jsx(c,{children:"Điểm"})]})}),s.jsx(k,{children:i.map(({coderID:t,coderName:m,totalPoint:d,rank:e})=>s.jsxs(g,{children:[s.jsx(l,{children:e<=3?s.jsx(K,{color:e===1?"gold":e===2?"silver":"#cd7f32",size:20}):e}),s.jsx(l,{children:m}),s.jsx(l,{children:(d||0).toLocaleString()})]},t))})]})]})};export{J as default};
