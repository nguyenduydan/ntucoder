import{b as n,_ as E,j as s,B as b,aq as V,a7 as l,a8 as h,g as u,a9 as d,I as M,z as B,f as L,aa as F,ab as N,m as z}from"./vendor-BGniOJC6.js";import{E as O,a as R}from"./index-PLasXggS.js";import"./charts-vendor-CYURHQdq.js";import"./lodash-vendor-CS6reBND.js";import"./axios-vendor-xsH4HHeE.js";import"./moment-vendor-CTDujYFw.js";const _=({coderID:C})=>{const[o,p]=n.useState(""),[e,m]=n.useState(""),[r,w]=n.useState(""),[I,x]=n.useState(!1),[i,P]=n.useState(!1),[a,g]=n.useState({}),f=E(),y=async()=>{var k,v;let t={};o||(t.current="Vui lòng nhập mật khẩu hiện tại."),e||(t.new="Vui lòng nhập mật khẩu mới."),r||(t.confirm="Vui lòng xác nhận mật khẩu mới."),e&&r&&e!==r&&(t.confirm="Mật khẩu mới không khớp.");const j=O(e);if(e&&j&&(t.new=j),g(t),!(Object.keys(t).length>0)){x(!0);try{await R.post(`/Account/${C}/repassword`,{oldPassword:o,password:e,repassword:r}),f({title:"Đổi mật khẩu thành công.",status:"success",variant:"top-accent",position:"top"}),p(""),m(""),w(""),g({})}catch(c){const S=((v=(k=c==null?void 0:c.response)==null?void 0:k.data)==null?void 0:v.error)||"Lỗi khi đổi mật khẩu.";f({title:S,status:"error",variant:"top-accent",position:"top"})}finally{x(!1)}}};return s.jsx(b,{px:6,py:4,children:s.jsxs(V,{spacing:4,align:"stretch",children:[s.jsxs(l,{isInvalid:!!a.current,children:[s.jsx(h,{children:"Mật khẩu hiện tại"}),s.jsx(u,{type:"password",value:o,onChange:t=>p(t.target.value),autoComplete:"off"}),s.jsx(d,{children:a.current})]}),s.jsxs(l,{isInvalid:!!a.new,children:[s.jsx(h,{children:"Mật khẩu mới"}),s.jsxs(M,{children:[s.jsx(u,{type:i?"text":"password",value:e,onChange:t=>m(t.target.value)}),s.jsx(B,{children:s.jsx(L,{variant:"ghost",size:"sm",icon:i?s.jsx(F,{}):s.jsx(N,{}),onClick:()=>P(!i),"aria-label":"Toggle password visibility"})})]}),s.jsx(d,{children:a.new})]}),s.jsxs(l,{isInvalid:!!a.confirm,children:[s.jsx(h,{children:"Xác nhận mật khẩu mới"}),s.jsx(u,{type:"password",value:r,onChange:t=>w(t.target.value)}),s.jsx(d,{children:a.confirm})]}),s.jsx(z,{colorScheme:"green",onClick:y,isLoading:I,children:"Đổi mật khẩu"})]})})};export{_ as default};
