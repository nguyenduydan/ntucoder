import{r as n,u as b,j as s,s as E,y as V,F as l,g as u,I as h,bZ as d,aB as B,aC as M,au as F,b_ as L,b$ as N,B as O,c0 as R,i as T}from"./index-DZ5M9zvS.js";const z=({coderID:C})=>{const[o,p]=n.useState(""),[e,w]=n.useState(""),[r,m]=n.useState(""),[y,x]=n.useState(!1),[i,I]=n.useState(!1),[a,g]=n.useState({}),j=b(),P=async()=>{var k,v;let t={};o||(t.current="Vui lòng nhập mật khẩu hiện tại."),e||(t.new="Vui lòng nhập mật khẩu mới."),r||(t.confirm="Vui lòng xác nhận mật khẩu mới."),e&&r&&e!==r&&(t.confirm="Mật khẩu mới không khớp.");const f=R(e);if(e&&f&&(t.new=f),g(t),!(Object.keys(t).length>0)){x(!0);try{await T.post(`/Account/${C}/repassword`,{oldPassword:o,password:e,repassword:r}),j({title:"Đổi mật khẩu thành công.",status:"success",variant:"top-accent",position:"top"}),p(""),w(""),m(""),g({})}catch(c){const S=((v=(k=c==null?void 0:c.response)==null?void 0:k.data)==null?void 0:v.error)||"Lỗi khi đổi mật khẩu.";j({title:S,status:"error",variant:"top-accent",position:"top"})}finally{x(!1)}}};return s.jsx(E,{px:6,py:4,children:s.jsxs(V,{spacing:4,align:"stretch",children:[s.jsxs(l,{isInvalid:!!a.current,children:[s.jsx(u,{children:"Mật khẩu hiện tại"}),s.jsx(h,{type:"password",value:o,onChange:t=>p(t.target.value),autoComplete:"off"}),s.jsx(d,{children:a.current})]}),s.jsxs(l,{isInvalid:!!a.new,children:[s.jsx(u,{children:"Mật khẩu mới"}),s.jsxs(B,{children:[s.jsx(h,{type:i?"text":"password",value:e,onChange:t=>w(t.target.value)}),s.jsx(M,{children:s.jsx(F,{variant:"ghost",size:"sm",icon:i?s.jsx(L,{}):s.jsx(N,{}),onClick:()=>I(!i),"aria-label":"Toggle password visibility"})})]}),s.jsx(d,{children:a.new})]}),s.jsxs(l,{isInvalid:!!a.confirm,children:[s.jsx(u,{children:"Xác nhận mật khẩu mới"}),s.jsx(h,{type:"password",value:r,onChange:t=>m(t.target.value)}),s.jsx(d,{children:a.confirm})]}),s.jsx(O,{colorScheme:"green",onClick:P,isLoading:y,children:"Đổi mật khẩu"})]})})};export{z as default};
