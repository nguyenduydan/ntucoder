import{r as n,U as E,j as s,B as M,ah as V,a1 as l,a2 as h,f as u,a3 as d,I as b,t as B,e as L,i as N}from"./react-vendor-jMCSND2O.js";import{E as F,a as O}from"./index-b-BR7AAp.js";import{cM as R,cN as T}from"./vendor-BYm5b_XE.js";import"./charts-vendor-DwxpLNbD.js";import"./lodash-vendor-CBiJWk4A.js";const $=({coderID:C})=>{const[o,p]=n.useState(""),[e,m]=n.useState(""),[r,w]=n.useState(""),[I,x]=n.useState(!1),[i,P]=n.useState(!1),[a,g]=n.useState({}),f=E(),y=async()=>{var k,v;let t={};o||(t.current="Vui lòng nhập mật khẩu hiện tại."),e||(t.new="Vui lòng nhập mật khẩu mới."),r||(t.confirm="Vui lòng xác nhận mật khẩu mới."),e&&r&&e!==r&&(t.confirm="Mật khẩu mới không khớp.");const j=F(e);if(e&&j&&(t.new=j),g(t),!(Object.keys(t).length>0)){x(!0);try{await O.post(`/Account/${C}/repassword`,{oldPassword:o,password:e,repassword:r}),f({title:"Đổi mật khẩu thành công.",status:"success",variant:"top-accent",position:"top"}),p(""),m(""),w(""),g({})}catch(c){const S=((v=(k=c==null?void 0:c.response)==null?void 0:k.data)==null?void 0:v.error)||"Lỗi khi đổi mật khẩu.";f({title:S,status:"error",variant:"top-accent",position:"top"})}finally{x(!1)}}};return s.jsx(M,{px:6,py:4,children:s.jsxs(V,{spacing:4,align:"stretch",children:[s.jsxs(l,{isInvalid:!!a.current,children:[s.jsx(h,{children:"Mật khẩu hiện tại"}),s.jsx(u,{type:"password",value:o,onChange:t=>p(t.target.value),autoComplete:"off"}),s.jsx(d,{children:a.current})]}),s.jsxs(l,{isInvalid:!!a.new,children:[s.jsx(h,{children:"Mật khẩu mới"}),s.jsxs(b,{children:[s.jsx(u,{type:i?"text":"password",value:e,onChange:t=>m(t.target.value)}),s.jsx(B,{children:s.jsx(L,{variant:"ghost",size:"sm",icon:i?s.jsx(R,{}):s.jsx(T,{}),onClick:()=>P(!i),"aria-label":"Toggle password visibility"})})]}),s.jsx(d,{children:a.new})]}),s.jsxs(l,{isInvalid:!!a.confirm,children:[s.jsx(h,{children:"Xác nhận mật khẩu mới"}),s.jsx(u,{type:"password",value:r,onChange:t=>w(t.target.value)}),s.jsx(d,{children:a.confirm})]}),s.jsx(N,{colorScheme:"green",onClick:y,isLoading:I,children:"Đổi mật khẩu"})]})})};export{$ as default};
