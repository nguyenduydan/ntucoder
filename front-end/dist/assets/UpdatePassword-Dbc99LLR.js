import{r as n,u as E,j as s,s as M,a1 as V,F as l,g as h,I as u,aL as d,aM as L,aN as b,a3 as B,aO as F,aP as N,B as O,aQ as R,i as T}from"./index-C3mpdEe2.js";const A=({coderID:P})=>{const[o,p]=n.useState(""),[e,w]=n.useState(""),[r,m]=n.useState(""),[C,x]=n.useState(!1),[i,I]=n.useState(!1),[a,g]=n.useState({}),j=E(),y=async()=>{var k,v;let t={};o||(t.current="Vui lòng nhập mật khẩu hiện tại."),e||(t.new="Vui lòng nhập mật khẩu mới."),r||(t.confirm="Vui lòng xác nhận mật khẩu mới."),e&&r&&e!==r&&(t.confirm="Mật khẩu mới không khớp.");const f=R(e);if(e&&f&&(t.new=f),g(t),!(Object.keys(t).length>0)){x(!0);try{await T.post(`/Account/${P}/repassword`,{oldPassword:o,password:e,repassword:r}),j({title:"Đổi mật khẩu thành công.",status:"success",variant:"top-accent",position:"top"}),p(""),w(""),m(""),g({})}catch(c){const S=((v=(k=c==null?void 0:c.response)==null?void 0:k.data)==null?void 0:v.error)||"Lỗi khi đổi mật khẩu.";j({title:S,status:"error",variant:"top-accent",position:"top"})}finally{x(!1)}}};return s.jsx(M,{px:6,py:4,children:s.jsxs(V,{spacing:4,align:"stretch",children:[s.jsxs(l,{isInvalid:!!a.current,children:[s.jsx(h,{children:"Mật khẩu hiện tại"}),s.jsx(u,{type:"password",value:o,onChange:t=>p(t.target.value),autoComplete:"off"}),s.jsx(d,{children:a.current})]}),s.jsxs(l,{isInvalid:!!a.new,children:[s.jsx(h,{children:"Mật khẩu mới"}),s.jsxs(L,{children:[s.jsx(u,{type:i?"text":"password",value:e,onChange:t=>w(t.target.value)}),s.jsx(b,{children:s.jsx(B,{variant:"ghost",size:"sm",icon:i?s.jsx(F,{}):s.jsx(N,{}),onClick:()=>I(!i),"aria-label":"Toggle password visibility"})})]}),s.jsx(d,{children:a.new})]}),s.jsxs(l,{isInvalid:!!a.confirm,children:[s.jsx(h,{children:"Xác nhận mật khẩu mới"}),s.jsx(u,{type:"password",value:r,onChange:t=>m(t.target.value)}),s.jsx(d,{children:a.confirm})]}),s.jsx(O,{colorScheme:"green",onClick:y,isLoading:C,children:"Đổi mật khẩu"})]})})};export{A as default};
