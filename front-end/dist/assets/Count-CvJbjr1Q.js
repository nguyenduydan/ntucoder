import{bI as E,r as s,bJ as b,bK as V,bL as m,bM as I,bN as S,bO as w,bP as x,bQ as C,j as v,O as y}from"./index-DZ5M9zvS.js";function h(t){const n=E(()=>V(t)),{isStatic:a}=s.useContext(b);if(a){const[,o]=s.useState(t);s.useEffect(()=>n.on("change",o),[])}return n}function d(t){return typeof t=="number"?t:parseFloat(t)}function M(t,n={}){const{isStatic:a}=s.useContext(b),o=s.useRef(null),e=h(m(t)?d(t.get()):t),c=s.useRef(e.get()),r=s.useRef(()=>{}),l=()=>{const i=o.current;i&&i.time===0&&i.sample(w.delta),f(),o.current=x({keyframes:[e.get(),c.current],velocity:e.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...n,onUpdate:r.current})},f=()=>{o.current&&o.current.stop()};return s.useInsertionEffect(()=>e.attach((i,u)=>a?u(i):(c.current=i,r.current=u,I.update(l),e.get()),f),[JSON.stringify(n)]),S(()=>{if(m(t))return t.on("change",i=>e.set(d(i)))},[e]),e}const O={some:0,all:1};function R(t,n,{root:a,margin:o,amount:e="some"}={}){const c=C(t),r=new WeakMap,l=i=>{i.forEach(u=>{const p=r.get(u.target);if(u.isIntersecting!==!!p)if(u.isIntersecting){const g=n(u);typeof g=="function"?r.set(u.target,g):f.unobserve(u.target)}else typeof p=="function"&&(p(u),r.delete(u.target))})},f=new IntersectionObserver(l,{root:a,rootMargin:o,threshold:typeof e=="number"?e:O[e]});return c.forEach(i=>f.observe(i)),()=>f.disconnect()}function L(t,{root:n,margin:a,amount:o,once:e=!1}={}){const[c,r]=s.useState(!1);return s.useEffect(()=>{if(!t.current||e&&c)return;const l=()=>(r(!0),e?void 0:()=>r(!1)),f={root:n&&n.current||void 0,margin:a,amount:o};return R(t.current,l,f)},[n,t,a,e,o]),c}const A=({to:t})=>{const n=h(0),a=M(n,{duration:2,stiffness:100,damping:20}),[o,e]=s.useState(0),c=s.useRef(null),r=L(c,{once:!0,amount:.6});return s.useEffect(()=>{const l=a.on("change",f=>{e(Math.floor(f))});return()=>l()},[a]),s.useEffect(()=>{r&&n.set(t)},[r,t,n]),v.jsx(y.span,{ref:c,initial:{opacity:0},animate:r?{opacity:1}:{},transition:{duration:.3},children:o.toLocaleString()})};export{A as C};
