import{r as s,j as e,B as x,b,D as H,aN as S,o as k,z as N,A as B,E as f,G as n,J as K,K as r}from"./react-vendor-B0lTxKSL.js";import{a as L,m as W,P as q}from"./index-CfmnNlTN.js";import"./charts-vendor-DwxpLNbD.js";import"./vendor-C1WdaeOg.js";import"./lodash-vendor-CBiJWk4A.js";import"./axios-vendor-xsH4HHeE.js";import"./moment-vendor-CTDujYFw.js";const O=({coderId:l})=>{const[T,h]=s.useState(!0),[d,u]=s.useState([]),[a,c]=s.useState(1),[i,m]=s.useState(10),[j,y]=s.useState(0),[P,A]=s.useState(0),p=s.useCallback(async(t=1,o=10)=>{h(!0);try{if(!l){u([]);return}const g=await L.get("/Submission/history",{params:{coderId:l,page:t,pageSize:o}}),{data:w,currentPage:R,pageSize:D,totalPages:E,totalCount:v}=g.data;u(w||[]),c(R),m(D),y(E),A(v)}catch(g){console.error("❌ Error fetching history:",g)}finally{h(!1)}},[l]);s.useEffect(()=>{p(a,i)},[p,a,i]);const z=t=>{t>=1&&t<=j&&c(t)},C=t=>{m(t),c(1)};return e.jsxs(x,{px:6,py:5,minH:"50vh",bg:"white",borderRadius:"md",shadow:"md",children:[e.jsxs(x,{children:[e.jsx(b,{fontSize:"xl",color:"blue.600",fontWeight:"bold",children:"Lịch sử làm bài"}),e.jsx(H,{w:"60px",h:"3px",bg:"blue.600",borderRadius:"md",mt:1})]}),T?e.jsx(S,{align:"center",mt:10,children:e.jsx(k,{size:"lg",color:"blue.500"})}):d.length===0?e.jsx(S,{spacing:4,mt:5,children:e.jsx(b,{fontSize:"lg",color:"gray.600",children:"Chưa có lịch sử làm bài nào"})}):e.jsx(x,{overflowX:"auto",mt:5,children:e.jsxs(N,{variant:"simple",children:[e.jsx(B,{children:e.jsxs(f,{position:"sticky",top:0,zIndex:1,bg:"gray.200",children:[e.jsx(n,{textAlign:"center",children:"STT"}),e.jsx(n,{textAlign:"center",children:"Thời gian nộp"}),e.jsx(n,{textAlign:"center",children:"Ngôn ngữ"}),e.jsx(n,{textAlign:"center",children:"Kết quả"}),e.jsx(n,{textAlign:"center",children:"Điểm"}),e.jsx(n,{textAlign:"center",children:"Thời gian"})]})}),e.jsx(K,{children:d.map((t,o)=>e.jsxs(f,{children:[e.jsx(r,{textAlign:"center",children:(a-1)*i+o+1}),e.jsx(r,{textAlign:"center",children:W(t.submitTime)}),e.jsx(r,{textAlign:"center",children:t.compilerName||"---"}),e.jsx(r,{textAlign:"center",fontWeight:"bold",color:t.testResult==="Accepted"?"green.500":/fail|wrong|error/i.test(t.testResult)?"red.500":"yellow.500",children:t.testResult||"--"}),e.jsx(r,{textAlign:"center",children:t.point}),e.jsx(r,{textAlign:"center",children:t.maxTimeDuration!=null?`${t.maxTimeDuration} ms`:"--"})]},t.submissionID||o))})]})}),e.jsx(q,{currentPage:a,totalPages:j,totalRows:P,onPageChange:z,pageSize:i,onPageSizeChange:C})]})};export{O as default};
