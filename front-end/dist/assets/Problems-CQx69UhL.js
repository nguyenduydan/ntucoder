import{r as s,R as v,j as e,s as x,D as r,z as w,au as y,av as L,a6 as k,aw as z,ax as P,ay as C,a5 as E}from"./index-C3mpdEe2.js";const W=({height:u,refreshKey:p,onFinishRefresh:l})=>{const[n,g]=s.useState([]),[b,i]=s.useState(!1),[c,d]=s.useState(null),[a,m]=s.useState("true"),h=s.useCallback(async()=>{i(!0),d(null);try{const t={ascending:!0};(a==="true"||a==="false")&&(t.published=a==="true");const o=await v({controller:"Problem",page:1,pageSize:10,params:t});g(o.data||[])}catch(t){d("Không thể tải danh sách bài tập."),console.error("Lỗi khi lấy danh sách bài tập:",t)}finally{i(!1),l==null||l()}},[a,l]);s.useEffect(()=>{h()},[h,p]);const j=t=>{m(t.target.value)};return e.jsxs(x,{p:5,bg:"white",h:u||"auto",shadow:"md",borderRadius:"md",children:[e.jsxs(r,{fontSize:"xl",fontWeight:"bold",mb:4,children:["Bài tập (",n.length,")"]}),e.jsx(w,{mb:4,gap:4,align:"center",children:e.jsxs(y,{maxW:"200px",value:a,onChange:j,children:[e.jsx("option",{value:"",children:"Tất cả"}),e.jsx("option",{value:"true",children:"Công khai"}),e.jsx("option",{value:"false",children:"Không công khai"})]})}),b?e.jsx(L,{h:"100%",children:e.jsx(k,{size:"xl"})}):c?e.jsx(r,{color:"red.500",children:c}):n.length===0?e.jsx(r,{children:"Không có bài tập nào."}):e.jsx(z,{spacing:4,maxH:"250px",overflowY:"auto",children:n.map(({problemID:t,problemName:o,problemContent:f,coderName:S})=>e.jsxs(P,{p:4,borderWidth:"1px",borderRadius:"md",_hover:{shadow:"lg"},children:[e.jsx(r,{fontWeight:"bold",children:o}),e.jsx(x,{sx:{wordBreak:"break-word"},dangerouslySetInnerHTML:{__html:C(E(f,50))}}),e.jsxs(r,{fontSize:"sm",color:"gray.600",children:["Người tạo: ",S]})]},t))})]})};export{W as default};
