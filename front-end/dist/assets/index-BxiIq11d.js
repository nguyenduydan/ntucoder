import{ai as B,h as E,j as e,B as d,F as l,m as L,cj as ie,T as n,aE as X,w as z,ck as De,D as ke,as as le,b as a,_ as G,c1 as Te,L as te,cc as Pe,E as se,cd as Le,ce as ze,cf as Re,cl as Ae,cg as We,ch as Ne,ci as Ee,bB as ce,K as re,R as ne,P as U,U as T,ad as He,O as Fe,Q as Me,bv as he,bw as de,bx as W,b$ as ue,c0 as N,a5 as ae,a6 as Y,aj as Be,aq as _e,n as oe,cm as $e,aK as Ke,$ as Oe,a0 as Ue,a1 as Ye,a2 as qe,a4 as Ge,ac as Ve,cn as Qe,co as Xe,v as Je,cp as Ze,o as q,cq as et,cr as tt,cs as st,ct as rt,V as nt}from"./vendor-BGniOJC6.js";import{u as at,b as ge,p as ot,s as xe,o as R,a as M,m as it,P as lt,q as ct,h as ht,S as dt,N as ut}from"./index-PLasXggS.js";import"./charts-vendor-CYURHQdq.js";import"./lodash-vendor-CS6reBND.js";import"./axios-vendor-xsH4HHeE.js";import"./moment-vendor-CTDujYFw.js";const gt=({lesson:r})=>{const i=B(),y=E();return e.jsx(d,{background:"rgb(14 38 67)",h:"8vh",children:e.jsx(l,{justifyContent:"space-between",h:"100%",py:2,px:4,alignItems:"center",children:e.jsxs(l,{textColor:"white",fontSize:"xl",align:"center",children:[e.jsx(L,{leftIcon:e.jsx(ie,{}),color:"white",size:"md",variant:"link",onClick:()=>i(`${y.pathname.replace(/\/\d+$/,"")}`),_hover:{transform:"translateX(-5px)",transition:"transform 0.3s ease"}}),e.jsx(n,{fontWeight:"none",children:r.lessonTitle})]})})})};function xt({lesson:r}){at((r==null?void 0:r.lessonTitle)||"N·ªôi dung b√†i h·ªçc");const{coder:i}=ge();return e.jsxs(d,{px:4,py:5,children:[e.jsxs(l,{px:5,alignItems:"center",gap:4,justifyContent:"space-between",children:[e.jsxs(l,{flex:"1",alignItems:"center",gap:4,children:[e.jsx(ot,{size:"md",src:(i==null?void 0:i.avatar)||"",alt:"Coder Avatar",borderRadius:"full",boxSize:"50px",objectFit:"cover",loading:"lazy"}),e.jsx(X,{to:`/profile/${i==null?void 0:i.coderID}`,children:e.jsx(n,{maxW:"200px",_hover:{color:"blue"},fontWeight:"bold",children:((i==null?void 0:i.coderName)||"·∫®n danh").replace(/(.{3}).*(@.*)/,"$1******$2")})})]}),e.jsxs(l,{alignItems:"center",children:[e.jsx(z,{as:De,color:"red"}),e.jsx(n,{ms:1,fontWeight:"bold",fontSize:"lg",children:" 100 ƒëi·ªÉm"})]})]}),e.jsx(ke,{my:4}),e.jsx(d,{sx:{wordBreak:"break-word"},dangerouslySetInnerHTML:{__html:xe(r==null?void 0:r.lessonContent)}})]})}const mt=({onSelectLesson:r})=>{const{slugId:i}=le(),y=i?i.split("-"):[],p=y.length>0?parseInt(y.pop(),10):NaN,[u,j]=a.useState(null),[b,g]=a.useState(!0),c=G(),h=B(),S=E(),[C,I]=a.useState({}),s=async()=>{if(isNaN(p)){c({title:"L·ªói",description:"ID kh√¥ng h·ª£p l·ªá!",status:"error",duration:3e3,isClosable:!0}),h("/course");return}g(!0);try{const t=await R({controller:"Course",id:p});if(!(t!=null&&t.topics))throw new Error("Kh√¥ng c√≥ d·ªØ li·ªáu kh√≥a h·ªçc");const D=await Promise.all(t.topics.map(async f=>{try{const w=await R({controller:"Topic",id:f.topicID});return{...f,lessons:(w.lessons||[]).filter(k=>Number(k.status)===1)}}catch{return{...f,lessons:[]}}}));j({...t,topics:D});let o={};for(const f of D)(await M.get(`/Progress/lesson-summary?topicId=${f.topicID}`)).data.forEach(k=>{o[k.lessonID]={completed:k.completedProblems,total:k.totalProblems}});I(o)}catch(t){c({title:"L·ªói",description:t.message||"Kh√¥ng th·ªÉ t·∫£i d·ªØ li·ªáu. Vui l√≤ng th·ª≠ l·∫°i!",status:"error",duration:3e3,isClosable:!0}),j(null)}finally{g(!1)}};return a.useEffect(()=>{s()},[p,S.pathname]),e.jsx(d,{children:b?e.jsx(Te,{noOfLines:5,spacing:4}):e.jsx(te,{spacing:0,children:Array.isArray(u==null?void 0:u.topics)&&u.topics.length>0?e.jsxs(Pe,{allowToggle:!0,defaultIndex:[0],children:[" ",u.topics.map((t,D)=>e.jsx(se,{bg:"gray.100",borderRadius:"md",children:e.jsx(Le,{border:"none",children:({isExpanded:o})=>{var f,w,k,_;return e.jsxs(e.Fragment,{children:[e.jsx("h2",{children:e.jsxs(ze,{_expanded:{bg:"gray.200"},borderRadius:"sm",children:[e.jsxs(d,{flex:"1",textAlign:"left",borderBottomWidth:2,borderStyle:"dashed",py:2,children:[e.jsxs(n,{fontSize:"lg",children:[e.jsxs(n,{as:"span",fontWeight:"bold",children:["Ch·ªß ƒë·ªÅ ",D+1,":"]})," ",(t==null?void 0:t.topicName)||"Kh√¥ng c√≥ t√™n"]}),e.jsxs(l,{alignItems:"center",gap:10,fontSize:"sm",children:[e.jsxs(l,{alignItems:"center",gap:1,children:[e.jsx(Re,{color:"black"}),e.jsxs(n,{children:["T·ªïng s·ªë b√†i h·ªçc: ",((f=t==null?void 0:t.lessons)==null?void 0:f.length)||0]})]}),e.jsxs(l,{alignItems:"center",gap:1,children:[e.jsx(Ae,{color:"black"}),e.jsxs(n,{children:["Ti·∫øn ƒë·ªô: ",((w=t==null?void 0:t.lessons)==null?void 0:w.length)||0]})]})]})]}),o?e.jsx(We,{boxSize:4}):e.jsx(Ne,{boxSize:4})]})}),e.jsx(Ee,{pb:4,children:(k=t.lessons)!=null&&k.length?e.jsx(te,{spacing:2,children:(_=t.lessons)==null?void 0:_.map(v=>e.jsx(X,{to:`${S.pathname.replace(/\/\d+$/,"")}/${v.lessonID}`,style:({isActive:V})=>({textDecoration:"none",color:V?"blue.500":"inherit"}),onClick:()=>r==null?void 0:r(v.lessonID),children:e.jsx(se,{cursor:"pointer",_hover:{bg:"gray.300",transform:"scale(1.01)"},transition:"all .2s ease-in-out",pl:2,bg:"gray.50",borderRadius:"sm",p:2,children:e.jsxs(l,{alignItems:"center",justifyContent:"space-between",gap:2,fontSize:"md",children:[e.jsxs(n,{fontSize:"md",children:["üìö ",v.lessonTitle||"Kh√¥ng c√≥ t√™n b√†i h·ªçc"," "]}),C[v.lessonID]?C[v.lessonID].completed===C[v.lessonID].total&&C[v.lessonID].total>0?e.jsx(z,{as:ce,fontSize:"lg",color:"green"}):e.jsxs(n,{as:"span",ml:2,color:"inherit",fontWeight:"bold",children:[C[v.lessonID].completed,"/",C[v.lessonID].total]}):"0/0"]})},v.lessonID||Math.random())}))}):e.jsx(n,{fontSize:"md",color:"gray.500",children:"Kh√¥ng c√≥ b√†i h·ªçc n√†o."})})]})}},t==null?void 0:t.topicID)},(t==null?void 0:t.topicID)||D))]}):e.jsx(n,{fontSize:"md",color:"gray.500",children:"Kh√¥ng c√≥ ch·ªß ƒë·ªÅ n√†o."})})})},Q=[{Header:"STT"},{Header:"T√†i kho·∫£n"},{Header:"Th·ªùi gian n·ªôp"},{Header:"Ng√¥n ng·ªØ"},{Header:"Ki·ªÉm th·ª≠"},{Header:"ƒêi·ªÉm"},{Header:"Th·ªùi gian"}],pt=()=>{const r=E(),i=B(),p=new URLSearchParams(r.search).get("problemID"),[u,j]=a.useState(!1),[b,g]=a.useState([]),[c,h]=a.useState({currentPage:1,pageSize:10,totalPages:0,totalCount:0}),S=a.useCallback(async()=>{if(p){j(!0);try{const s=await M.get("/Submission/history",{params:{problemId:p,page:c.currentPage,pageSize:c.pageSize}}),{data:t,currentPage:D,pageSize:o,totalPages:f,totalCount:w}=s.data;g(t),h({currentPage:D,pageSize:o,totalPages:f,totalCount:w})}catch(s){console.error("Error fetching history",s)}finally{j(!1)}}},[p,c.currentPage,c.pageSize]);a.useEffect(()=>{S()},[S]);const C=s=>{h(t=>({...t,currentPage:s}))},I=s=>{h(t=>({...t,pageSize:s,currentPage:1}))};return e.jsxs(d,{p:4,children:[e.jsx(l,{justify:"flex-end",mb:3,children:e.jsx(L,{onClick:S,colorScheme:"blue",borderRadius:"md",size:"sm",children:"Refresh"})}),u?e.jsx(re,{variant:"striped",maxH:"450px",overflowY:"auto",children:e.jsx(ne,{children:Array.from({length:5}).map((s,t)=>e.jsx(U,{children:Q.map((D,o)=>e.jsx(T,{p:3,children:e.jsx(He,{height:"20px"})},o))},`skeleton-${t}`))})}):e.jsxs(re,{variant:"striped",colorScheme:"blue",children:[e.jsx(Fe,{children:e.jsx(U,{children:Q.map((s,t)=>e.jsx(Me,{fontSize:"xs",textAlign:"center",maxW:"80px",p:2,children:s.Header},t))})}),e.jsx(ne,{children:b.length===0?e.jsx(U,{children:e.jsx(T,{colSpan:Q.length,textAlign:"center",fontSize:"sm",children:"Ch∆∞a c√≥ b√†i l√†m n√†o"})}):b.map((s,t)=>e.jsxs(U,{children:[e.jsx(T,{p:2,fontSize:"sm",textAlign:"center",children:(c.currentPage-1)*c.pageSize+t+1}),e.jsx(T,{p:2,fontSize:"sm",textAlign:"center",children:e.jsx(L,{onClick:()=>i(`/profile/${s.coderID}`),variant:"link",colorScheme:"black",fontSize:"sm",fontWeight:"normal",_hover:{color:"blue.500",textDecoration:"underline"},children:s.coderName})}),e.jsx(T,{p:2,fontSize:"sm",textAlign:"center",children:it(s.submitTime)}),e.jsx(T,{p:2,fontSize:"sm",textAlign:"center",children:s.compilerName||"---"}),e.jsx(T,{p:2,fontSize:"sm",textAlign:"center",fontWeight:"bold",color:s.testResult==="Accepted"?"green.500":/fail|wrong|error/i.test(s.testResult)?"red.500":"yellow.500",children:s.testResult||"--/--"}),e.jsx(T,{p:2,fontSize:"sm",textAlign:"center",children:s.point}),e.jsx(T,{p:2,fontSize:"sm",textAlign:"center",children:s.maxTimeDuration!=null?`${s.maxTimeDuration} ms`:"--"})]},s.submissionID||t))})]}),e.jsx(lt,{currentPage:c.currentPage,totalPages:c.totalPages,pageSize:c.pageSize,totalRows:c.totalCount,onPageChange:C,onPageSizeChange:I})]})},jt=({hasRun:r,id:i,errors:y,testCaseResult:p})=>{const[u,j]=a.useState([]),[b,g]=a.useState(null);return a.useEffect(()=>{i&&(async()=>{try{const h=await R({controller:"Problem",id:i}),S=await ct({controller:"TestCase",problemid:i});(S||h)&&(g(h.timeLimit||null),j(S.data||[]))}catch(h){console.error("L·ªói khi l·∫•y d·ªØ li·ªáu test case:",h)}})()},[i]),e.jsxs(d,{maxH:"25vh",bg:"gray.900",color:"white",px:4,py:3,overflowY:"auto",children:[!r&&u.length===0&&e.jsx(n,{color:"gray.400",border:"1px solid",borderColor:"gray.600",px:3,py:2,borderRadius:"md",children:"Vui l√≤ng ch·∫°y th·ª≠ code ƒë·ªÉ xem k·∫øt qu·∫£ ƒë·∫ßy ƒë·ªß!"}),e.jsxs(he,{isLazy:!0,variant:"enclosed",colorScheme:"white",mt:3,children:[e.jsx(de,{children:u.length===0?e.jsx(W,{children:"Testcase 1"},0):u.map((c,h)=>e.jsxs(W,{children:["Testcase ",h+1]},h))}),e.jsx(ue,{children:u.length===0?e.jsx(N,{children:e.jsxs(ae,{templateColumns:"2fr 1fr",bg:"gray.700",p:4,borderRadius:"md",fontSize:"14px",children:[e.jsxs(Y,{children:[e.jsxs(l,{justify:"start",children:[e.jsx(n,{fontWeight:"bold",mr:5,children:"ƒê·∫ßu v√†o:"}),e.jsx(n,{children:'""'})]}),e.jsxs(l,{justify:"start",children:[e.jsx(n,{fontWeight:"bold",mr:5,children:"ƒê·∫ßu ra th·ª±c t·∫ø:"}),e.jsx(n,{children:'""'})]}),e.jsxs(l,{justify:"start",children:[e.jsx(n,{fontWeight:"bold",mr:5,children:"ƒê·∫ßu ra mong ƒë·ª£i:"}),e.jsx(n,{children:'""'})]}),e.jsxs(l,{justify:"start",children:[e.jsx(n,{fontWeight:"bold",mr:5,children:"Gi·ªõi h·∫°n th·ªùi gian:"}),e.jsx(n,{children:'""'})]}),e.jsxs(l,{justify:"start",children:[e.jsx(n,{fontWeight:"bold",mr:5,children:"Th·ªùi gian th·ª±c thi:"}),e.jsx(n,{children:'""'})]})]}),e.jsxs(Y,{children:[e.jsx(n,{fontWeight:"bold",mr:5,children:"Hi·ªÉn th·ªã l·ªói"}),e.jsx(n,{bg:"black",minH:"12vh",borderRadius:"md",p:2,children:y||"Kh√¥ng c√≥ l·ªói"})]})]})},0):u.map((c,h)=>e.jsx(N,{children:e.jsxs(ae,{templateColumns:"2fr 1fr",bg:"gray.700",p:4,borderRadius:"md",fontSize:"14px",children:[e.jsxs(Y,{children:[e.jsxs(l,{justify:"start",children:[e.jsx(n,{fontWeight:"bold",mr:5,children:"ƒê·∫ßu v√†o:"}),e.jsx(n,{children:c.input||'" "'})]}),e.jsxs(l,{justify:"start",children:[e.jsx(n,{fontWeight:"bold",mr:5,children:"ƒê·∫ßu ra th·ª±c t·∫ø:"}),e.jsx(n,{children:p.actualOutput||'" "'})]}),e.jsxs(l,{justify:"start",children:[e.jsx(n,{fontWeight:"bold",mr:5,children:"ƒê·∫ßu ra mong ƒë·ª£i:"}),e.jsx(n,{children:c.output||'" "'})]}),e.jsxs(l,{justify:"start",children:[e.jsx(n,{fontWeight:"bold",mr:5,children:"Gi·ªõi h·∫°n th·ªùi gian:"}),e.jsxs(n,{children:[b||'" "'," ms"]})]}),e.jsxs(l,{justify:"start",children:[e.jsx(n,{fontWeight:"bold",mr:5,children:"Th·ªùi gian th·ª±c thi:"}),e.jsxs(n,{children:[p.execTime||'" "'," ms"]})]})]}),e.jsxs(Y,{children:[e.jsx(n,{fontWeight:"bold",mr:5,children:"Hi·ªÉn th·ªã l·ªói"}),e.jsx(n,{bg:"black",minH:"12vh",borderRadius:"md",p:2,children:y||"Kh√¥ng c√≥ l·ªói"})]})]})},h))})]})]})};function bt(){const r=E(),{coder:i}=ge(),{isOpen:y,onOpen:p,onClose:u}=Be(),[j,b]=a.useState({bg:"gray.100",colorScheme:"gray"}),[g,c]=a.useState({status:!1,type:""}),h=G(),S=B(),[C,I]=a.useState([]),[s,t]=a.useState("cpp"),o=new URLSearchParams(r.search).get("problemID"),[f,w]=a.useState(`#include<iostream>
using namespace std;

int main() {
    cout << "Hello C++";
    return 0;
}`),[k,_]=a.useState("vs-dark"),[v,V]=a.useState(null),[me,pe]=a.useState({input:"",actualOutput:"",expectedOutput:"",timeLimit:"",execTime:""}),[je,$]=a.useState(""),[be,H]=a.useState(""),[J,Z]=a.useState(!1),[fe,ye]=a.useState(!1);a.useEffect(()=>{(async()=>{if(o!==null)try{const m=await R({controller:"Problem",id:o}),P=(await ht({controller:"Compiler",page:1,pageSize:10})).data;if(I(P),P.length>0){const K=P[0];t(K)}w(m.testCode||"")}catch(m){console.error("L·ªói khi l·∫•y d·ªØ li·ªáu b√†i t·∫≠p:",m)}})()},[o]);const ee=x=>{switch(x){case"Accepted":case"Success":$("‚úÖ Ch·∫°y th·ª≠ th√†nh c√¥ng"),H("Ch√∫c m·ª´ng! B√†i l√†m ƒë√∫ng ho·∫∑c kh√¥ng c√≥ l·ªói."),b({bg:"green.100",colorScheme:"green"}),Z(!0);break;case"Wrong Answer":H("‚ùå Sai k·∫øt qu·∫£"),b({bg:"yellow.100",colorScheme:"yellow"});break;case"Runtime Error":$("üí• Runtime Error"),H("Ch∆∞∆°ng tr√¨nh g·∫∑p l·ªói khi th·ª±c thi."),b({bg:"red.100",colorScheme:"red"});break;case"Compilation Error":$("üîß Compilation Error"),H("C√≥ l·ªói bi√™n d·ªãch. H√£y ki·ªÉm tra l·∫°i c√∫ ph√°p."),b({bg:"orange.100",colorScheme:"orange"});break;default:$("‚ö†Ô∏è Kh√¥ng x√°c ƒë·ªãnh"),H("Kh√¥ng th·ªÉ x√°c ƒë·ªãnh tr·∫°ng th√°i k·∫øt qu·∫£."),b({bg:"gray.100",colorScheme:"gray"}),Z(!1);break}},Se=async()=>{c({status:!0,type:"test"});try{const m=(await M.post("/CodeExecute/try-run",{sourceCode:f,compilerExtension:s.compilerExtension,problemId:parseInt(o)})).data;m.error?h({title:"L·ªói k·∫øt n·ªëi",status:"error",duration:2e3,isClosable:!0,variant:"left-accent",position:"top"}):(pe({input:m.input||"",actualOutput:m.output||"",expectedOutput:m.expectedOutput||"",timeLimit:m.timeLimit||"",execTime:m.timeDuration||""}),V(m.error||""),ee(m.result)),p()}catch(x){console.error("L·ªói khi g·ª≠i y√™u c·∫ßu ch·∫°y th·ª≠:",x),h({title:"L·ªói k·∫øt n·ªëi",status:"error",duration:2e3,isClosable:!0,variant:"left-accent",position:"top"})}finally{c({status:!1,type:""})}},Ce=async()=>{var x,m,A,P,K;c({status:!0,type:"submit"});try{const F={problemId:o,compilerID:s.compilerID,submissionCode:f,coderID:i.coderID},O=await M.post("/Submission/submit",F);O.status===200&&(ee(O.data.testRuns[0].result),p(),ye(!0))}catch(F){console.error("L·ªói khi g·ª≠i y√™u c·∫ßu n·ªôp b√†i:",F);const O=((A=(m=(x=F.response)==null?void 0:x.data)==null?void 0:m.errors)==null?void 0:A[0])||((K=(P=F.response)==null?void 0:P.data)==null?void 0:K.message)||"L·ªói kh√¥ng x√°c ƒë·ªãnh.";h({title:"L·ªói n·ªôp b√†i",status:"warning",variant:"solid",description:O,duration:2e3,isClosable:!0,position:"top"})}finally{c({status:!1,type:""})}},we=x=>{const m=Number(x.target.value),A=C.find(P=>P.compilerID===m);A&&t(A)},Ie=()=>{if(!o)return;const x=parseInt(o)+1,m=new URLSearchParams(r.search);m.set("problemID",x),S(`${r.pathname}?${m.toString()}`),u()},ve=x=>{_(x.target.value)};return e.jsxs(_e,{h:"100%",spacing:0,align:"stretch",children:[e.jsx(d,{p:4,bg:"gray.900",color:"white",children:e.jsxs(l,{justifyContent:"space-between",alignItems:"center",children:[e.jsx(oe,{w:"20%",value:(s==null?void 0:s.compilerID)||"",onChange:we,bg:"transparent",color:"white",sx:{option:{color:"white",bg:"gray.900"}},isDisabled:g.status,cursor:"pointer",children:C.map(x=>e.jsx("option",{value:x.compilerID,children:x.compilerName},x.compilerID))}),e.jsxs(l,{width:"70%",justify:"end",align:"center",gap:4,children:[e.jsxs(oe,{w:"20%",value:k,onChange:ve,bg:"transparent",color:"white",sx:{option:{color:"white",bg:"gray.900"}},isDisabled:g.status,cursor:"pointer",children:[e.jsx("option",{value:"vs-dark",children:"T·ªëi"}),e.jsx("option",{value:"vs-light",children:"S√°ng"})]}),e.jsx(L,{colorScheme:"blue",borderRadius:"md",onClick:Se,isLoading:g.status&&g.type==="test",loadingText:"ƒêang ch·∫°y...",isDisabled:g.status||o===null,children:"Ch·∫°y th·ª≠"}),e.jsx(L,{leftIcon:e.jsx($e,{}),color:J?"green":"gray.500",borderRadius:"md",onClick:Ce,isLoading:g.status&&g.type==="submit",loadingText:"ƒêang ch·∫°y...",isDisabled:!J||g.status||o===null,children:"N·ªôp b√†i"})]})]})}),e.jsx(d,{h:"100%",overflow:"hidden",overflowY:"hidden",children:e.jsxs(l,{direction:"column",h:"100%",children:[e.jsx(d,{flex:"6",overflow:"hidden",borderBottom:"1px solid #555",children:e.jsx(Ke,{height:"100%",language:s!=null&&s.compilerExtension?s.compilerExtension.replace(".",""):"plaintext",theme:k,value:f,onChange:x=>w(x||""),options:{fontSize:14,minimap:{enabled:!1},readOnly:g.status}})}),e.jsx(d,{flex:"3",overflow:"hidden",bg:"gray.900",children:e.jsx(jt,{hasRun:!0,id:o,errors:v,testCaseResult:me})})]})}),e.jsxs(Oe,{isOpen:y,onClose:u,isCentered:!0,children:[e.jsx(Ue,{}),e.jsxs(Ye,{bg:j.bg,children:[e.jsx(qe,{textAlign:"center",children:je||""}),e.jsx(Ge,{textAlign:"center",fontSize:"lg",children:be||""}),e.jsx(Ve,{children:e.jsxs(l,{w:"100%",justify:"center",gap:2,children:[e.jsx(L,{colorScheme:j.colorScheme,onClick:u,children:"ƒê√≥ng"}),fe&&e.jsx(L,{colorScheme:"teal",onClick:Ie,children:"B√†i ti·∫øp theo"})]})})]})]})]})}const ft=({problem:r,onBack:i})=>e.jsxs(d,{px:4,py:5,children:[e.jsx(L,{leftIcon:e.jsx(ie,{}),color:"blue.500",size:"md",variant:"link",onClick:i,_hover:{transform:"translateX(-5px)",transition:"transform 0.3s ease"},mb:3,children:"Quay l·∫°i danh s√°ch b√†i t·∫≠p"}),e.jsx(d,{fontSize:"xl",fontWeight:"bold",mb:2,children:r==null?void 0:r.problemName}),e.jsx(d,{sx:{wordBreak:"break-word"},dangerouslySetInnerHTML:{__html:xe(r==null?void 0:r.problemContent)}})]}),yt=({lessonID:r})=>{const[i,y]=a.useState(null),[p,u]=a.useState(null),j=G(),b=E(),g=B(),h=new URLSearchParams(b.search).get("problemID"),[S,C]=a.useState([]),I=a.useCallback(async()=>{try{const o=await R({controller:"Lesson",id:r});y(o.lessonProblems||[])}catch(o){console.error("L·ªói khi l·∫•y d·ªØ li·ªáu b√†i h·ªçc:",o),j({title:"L·ªói",description:"Kh√¥ng th·ªÉ t·∫£i b√†i h·ªçc.",status:"error",duration:3e3,position:"top-right",variant:"top-accent",isClosable:!0})}},[r,j]),s=a.useCallback(async()=>{if(!h){u(null);return}try{const o=await R({controller:"Problem",id:h});u(o)}catch(o){console.error("L·ªói khi l·∫•y chi ti·∫øt b√†i t·∫≠p:",o),j({title:"L·ªói",description:"Kh√¥ng th·ªÉ t·∫£i chi ti·∫øt b√†i t·∫≠p.",status:"error",duration:3e3,position:"top-right",variant:"top-accent",isClosable:!0})}},[h,j]),t=a.useCallback(async()=>{try{const f=(await M.get(`/Progress/solved-problems?lessonId=${r}`)).data.map(w=>w.problemId);C(f)}catch(o){console.error("L·ªói khi l·∫•y danh s√°ch b√†i ƒë√£ ho√†n th√†nh:",o)}},[r]);a.useEffect(()=>{isNaN(r)||(I(),t())},[r,I,t]),a.useEffect(()=>{s()},[s]);const D=()=>{g(b.pathname),s(),I(),t()};return e.jsx(d,{p:5,children:!h||!p?e.jsxs(d,{children:[e.jsx(d,{fontSize:"xl",fontWeight:"bold",mb:4,children:"Danh s√°ch b√†i t·∫≠p"}),e.jsx(d,{children:!i||i.length===0?e.jsx(d,{children:"Kh√¥ng c√≥ b√†i t·∫≠p n√†o h·∫øt nha."}):i.map((o,f)=>{const w=S.includes(o.problemID);return e.jsx(X,{to:`${b.pathname}?problemID=${o.problemID}`,children:e.jsx(d,{p:2,borderBottom:"1px solid #eee",_hover:{bg:"gray.300",transform:"scale(1.01)"},transition:"all 0.2s",borderRadius:"md",cursor:"pointer",children:e.jsxs(l,{alignItems:"center",justifyContent:"space-between",children:[e.jsxs(l,{alignItems:"center",gap:2,children:[e.jsx(Qe,{}),e.jsxs(n,{children:[f+1,". ",o.problemName]})]}),e.jsx(z,{as:w?ce:Xe,color:w?"green.500":"gray.400",fontSize:"xl"})]})})},o.problemID)})})]}):e.jsx(ft,{problem:p,onBack:D})})};function kt(){const{lessonId:r}=le(),i=G(),[y,p]=a.useState(null),[u,j]=a.useState(0),[b,g]=a.useState(!0),c=E(),S=new URLSearchParams(c.search).get("problemID"),C=()=>{j(0)};return a.useEffect(()=>{const I=async()=>{try{const s=await R({controller:"Lesson",id:r});s&&s.lessonTitle&&s.lessonContent?p(s):(i({title:"L·ªói khi l·∫•y d·ªØ li·ªáu b√†i h·ªçc",status:"error",duration:2e3,isClosable:!0,position:"top-right"}),console.log("Kh√¥ng c√≥ d·ªØ li·ªáu b√†i h·ªçc"))}catch{g(!1),i({title:"L·ªói khi l·∫•y d·ªØ li·ªáu b√†i h·ªçc",status:"error",duration:2e3,isClosable:!0,position:"top-right"})}finally{g(!1)}};isNaN(r)||I()},[r,i]),e.jsx(dt,{children:e.jsx(d,{h:"712px",w:"100%",display:"flex",flexDirection:"column",children:b?e.jsx(l,{justify:"center",align:"center",height:"100vh",children:e.jsx(Je,{size:"xl",color:"blue.500"})}):y?e.jsxs(d,{flex:"1",display:"flex",flexDirection:"column",overflow:"hidden",children:[e.jsx(gt,{lesson:y}),e.jsx(d,{flex:"1",overflow:"hidden",children:e.jsxs(Ze,{className:"split-container",sizes:[45,55],minSize:0,gutterSize:5,style:{height:"100%"},children:[e.jsx(d,{bg:"white",h:"100%",overflow:"hidden",children:e.jsx(he,{orientation:"vertical",h:"100%",variant:"unstyled",index:u,onChange:I=>j(I),children:e.jsxs(l,{h:"100%",w:"100%",overflow:"hidden",children:[e.jsxs(de,{bg:"blue.600",color:"white",display:"flex",flexDirection:"column",alignItems:"center",h:"100%",children:[e.jsx(q,{label:"M√¥ t·∫£",placement:"right",hasArrow:!0,children:e.jsx(W,{py:4,_selected:{bg:"blue.800"},children:e.jsx(z,{as:et,boxSize:5})})}),e.jsx(q,{label:"Gi√°o tr√¨nh",placement:"right",hasArrow:!0,children:e.jsx(W,{py:4,_selected:{bg:"blue.800"},children:e.jsx(z,{as:tt,boxSize:5})})}),e.jsx(q,{label:"B√†i t·∫≠p",placement:"right",hasArrow:!0,children:e.jsx(W,{py:4,_selected:{bg:"blue.800"},children:e.jsx(z,{as:st,boxSize:5})})}),S&&e.jsx(q,{label:"L·ªãch s·ª≠",placement:"right",hasArrow:!0,children:e.jsx(W,{py:4,_selected:{bg:"blue.800"},children:e.jsx(z,{as:rt,boxSize:5})})})]}),e.jsxs(ue,{flex:"1",h:"100%",overflow:"hidden",children:[e.jsx(N,{p:0,h:"100%",overflowY:"auto",children:e.jsx(xt,{lesson:y})}),e.jsxs(N,{p:0,h:"100%",overflowY:"auto",children:[e.jsx(n,{fontWeight:"bold",fontSize:"lg",px:4,pt:2,children:"Gi√°o Tr√¨nh"}),e.jsx(mt,{onSelectLesson:C})]}),e.jsx(N,{p:0,h:"100%",overflowY:"auto",children:e.jsx(yt,{lessonID:r})}),S&&e.jsxs(N,{p:0,h:"100%",overflowY:"auto",children:[e.jsx(n,{fontWeight:"bold",fontSize:"lg",px:4,pt:2,children:"L·ªãch s·ª≠"}),e.jsx(pt,{})]})]})]})})}),e.jsx(d,{bg:"black",h:"100%",overflow:"auto",color:"white",children:e.jsx(bt,{})})]})})]}):e.jsx(l,{justify:"center",align:"center",height:"70vh",children:e.jsx(nt,{src:ut,alt:"Kh√¥ng c√≥ d·ªØ li·ªáu",h:"50%",objectFit:"fill",backgroundColor:"transparent"})})})})}export{kt as default};
